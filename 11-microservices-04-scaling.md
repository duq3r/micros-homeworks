
# Домашнее задание к занятию "Микросервисы: масштабирование"

Вы работаете в крупной компанию, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps специалисту необходимо выдвинуть предложение по организации инфраструктуры, для разработки и эксплуатации.

## Задача 1: Кластеризация

Предложите решение для обеспечения развертывания, запуска и управления приложениями.
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:
- Поддержка контейнеров;
- Обеспечивать обнаружение сервисов и маршрутизацию запросов;
- Обеспечивать возможность горизонтального масштабирования;
- Обеспечивать возможность автоматического масштабирования;
- Обеспечивать явное разделение ресурсов доступных извне и внутри системы;
- Обеспечивать возможность конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т.п.

Обоснуйте свой выбор.

## Ответ

| Параметр\Название                                                                                                                                                                                   | Kubernetes |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------|
| 1. Поддержка контейнеров                                                                                                                                                                            | +          |
| 2. Обнаружение сервисов и маршрутизация запросов                                                                                                                                                    | +          |
| 3. Возможность горизонтального масштабирования                                                                                                                                                      | +          |
| 4. Возможность автоматического масштабирования                                                                                                                                                      | +          |
| 5. Явное разделение ресурсов доступных извне и внутри системы                                                                                                                                       | +          |
| 6. Возможность конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т.п. | +          |

Подробная расшифровка по пунктам:

- 1. Kubernetes поддерживает разные системы контейнеризации.
- 2. Kubernetes DNS. Каждому сервису, созданному с помощью объекта `service` присваивается доменное имя совпадающее с именем самого сервиса. Маршрутизация происходит через `kube-proxy` и `virtual ip`.
- 3. Горизонтальное масштабирование в Kubernetes. HPA масштабирует количество реплик pod'ов. В качестве триггеров для изменения количества реплик можно использовать нагрузку на процессор и память.
- 4. Для автоматического масштабирования в Kubernetes есть функция autoscaling. В зависимости от нагрузки Kubernetes сам будет поддерживать min либо max количество запущенных экземпляров сервиса.
- 5. Namespaces - это способ разделить кластер на индивидуальные зоны. `NetworkPolicy` и `GlobalNetworkPolicy` дает разграничение доступа внутри кластера, контроль исходящего и входящего трафика. `ingress-controller` - обеспечивает маршрутизацию трафика.
- 6. В Kubernetes есть объект - `secret` для хранения чувствительных данных. Также есть `vault` для множества функционала по хранению секретов. `Env` для установки переменных сред в контейнеры.

#### Решением отвечающим всем указанным требованиям является Kubernetes. Я бы выбрал именно его. Данный продукт имеет большое комьюнити, вследствие чего по нему существует масса полезной информации(подробная документация, множество примеров реализации разного рода проектов). И он доступен с точки зрения финансов.


## Задача 2: Распределенный кэш * (необязательная)

Разработчикам вашей компании понадобился распределенный кэш для организации хранения временной информации по сессиям пользователей.
Вам необходимо построить Redis Cluster состоящий из трех шард с тремя репликами.

### Схема:

![11-04-01](https://user-images.githubusercontent.com/1122523/114282923-9b16f900-9a4f-11eb-80aa-61ed09725760.png)

---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
